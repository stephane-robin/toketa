{% extends '../../../modelePage.html' %}
{% load static %}

{% block contenu %} 
<ul>
    <li><a href="#texte">un string est composé de caractères</a></li>
    <li><a href="#concatenation">comprendre la concaténation</a></li>
    <li><a href="#transformer">des méthodes pour transformer les chaînes</a></li>
    <li><a href="#extraire">savoir extraire une sous-chaîne</a></li>
</ul>
{% endblock contenu %}

{% block cours %}

<!-- A PLACER EN DEBUT DE FICHIER -->
<!-- script for pyodide python sandbox -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
<!-- import codemirror stylings -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.3/codemirror.min.css" />
<!-- install codemirror.js version /5.63.3 from cdn -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.3/codemirror.min.js"
integrity="sha512-XMlgZzPyVXf1I/wbGnofk1Hfdx+zAWyZjh6c21yGo/k1zNC4Ve6xcQnTDTCHrjFGsOrVicJsBURLYktVEu/8vQ=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- install codemirror python language support -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.3/mode/python/python.min.js"
integrity="sha512-/mavDpedrvPG/0Grj2Ughxte/fsm42ZmZWWpHz1jCbzd5ECv8CB7PomGtw0NAnhHmE/lkDFkRMupjoohbKNA1Q=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- import codemirror dracula theme styles from cdn -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.3/theme/elegant.css" />

<style>
    /* set codemirror ide height to 100% of the textarea */
    .CodeMirror {
      height: auto;
      overflow: hidden;
    }
  </style>


<!-- Common function to initialize a sandbox -->
<script>
    var commentInitial = "# type your code here";
    const sandboxes = {};
  
    function initializeSandbox(codeInitial, sandboxId) {
      const outputElement = document.getElementById(`output${sandboxId}`);
      const codeElement = document.getElementById(`code${sandboxId}`);
  
      const editor = CodeMirror.fromTextArea(codeElement, {
        mode: {
          name: "python",
          version: 3,
          singleLineStringErrors: false,
        },
        theme: "elegant",
        lineNumbers: true,
        indentUnit: 4,
        matchBrackets: true,
      });
  
      editor.setValue(codeInitial);
      outputElement.value = "Initializing...\n";
  
      const sandbox = {
        pyodide: null,
        editor,
        outputElement,
      };
  
      sandboxes[sandboxId] = sandbox;
  
      async function main() {
        sandbox.pyodide = await loadPyodide({
          indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/",
        });
  
        sandbox.pyodide.runPython(`
          import sys
          sys.version
        `);
  
        sandbox.outputElement.value = ">>>\n";
      }
  
      main();
    }
  
    function executePython(sandboxId) {
      const sandbox = sandboxes[sandboxId];
  
      try {
        sandbox.pyodide.runPython(`
          import io
          sys.stdout = io.StringIO()
        `);
  
        const result = sandbox.pyodide.runPython(sandbox.editor.getValue());
        const stdout = sandbox.pyodide.runPython("sys.stdout.getvalue()");
        sandbox.outputElement.value += stdout + "\n";
      } catch (err) {
        sandbox.outputElement.value += "Error: " + err + "\n";
      }
    }
  
    /*function clearHistory(sandboxId) {
      const sandbox = sandboxes[sandboxId];
      sandbox.outputElement.value = "";
      console.log(sandboxId);
    }*/
</script>
<!-- fin js sandbox -->



<!-- TEXTE COMPOSE DE CARACTERES -->

<p class="invisible" id="texte">ancre</p>

<h3>Un string est composé de caractères</h3>

<p>Un caractère peut être un nombre '8', une lettre 'a' ou un terme spécial '!'.</p>

<p>Un texte est composé de caractères. En informatique, on utilise le terme chaîne de caractères à
    la place de texte et on numérote chaque caractère en partant de l'indice 0.</p>

<p>L'indice est donc l'emplacement numéroté de chaque caractère. Par exemple dans le mot 'Marc', le 'M' a pour indice 0,
    le 'a' a pour indice 1, le 'r' a pour indice 2 et le 'c' a pour indice 3.
</p>

    <p>Python associe à une chaîne de caractères le type <strong>str</strong> pour <em>string</em>.</p>

<p>Il est facile de repérer la position de chaque caractère d'une chaîne grâce à son indice, comme on peut le
voir dans l'exemple suivant :</p>

<pre><code class="language-python">maChaine = "bonjour"

print(maChaine[2])  # affiche n</code></pre>

<div class=fieldsetDefinition>
<h4>A RETENIR ...</h4> 
<p>Dans la chaîne de caractères <em>bonjour</em>, la lettre <em>b</em> a pour indice 0 et non pas 1, c'est à dire qu'elle se trouve à la position 0.</p>
</div>

<p>Les chaînes de caractères sont enregistrées dans le programme entre des guillements " ou des apostrophes ' indifféremment.
    Cela permet d'utiliser des balises différentes lorsque Python collabore avec un autre langage comme HTML, JavaScript, SQL, C, ... Cette 
situation est fréquente lorsqu'on programme des applications Web.</p>

<p>Attention toutefois, lorsqu'on utilise des apostrophes ' et que la chaîne contient une apostrophe, Python pourrait 
    l'interpréter comme la fin de la chaine. Pour éviter cela, on utilise un antislash \ qui indique à Python que le caractère suivant 
    appartient à la chaîne. Par exemple, les codes ci-dessous sont identiques :</p>

<pre><code class="language-python">phrase = "Les pâtes viennent d'Italie"</code></pre>
<pre><code class="language-python">phrase = 'Les pâtes viennent d\'Italie'</code></pre>

<p>Attention, lorsqu'on utilise des accents dans un texte comme par exemple en français é, à, è, ù, etc... 
    cela crée des difficultés d'affichage pour Python qui a été créé en anglais. Il faut dans ce cas 
    rajouter dès la première ligne de code l'instruction suivante qui indique à Python que les accents 
    et caractères spéciaux sont autorisés et qu'il pourra les trouver dans la table utf-8 :</p>

<pre><code class="language-python"># -*- coding: utf-8 -*-</code></pre>


<!-- CONCATENATION -->

<p class="invisible" id="concatenation">ancre</p>

<h3>La concaténation</h3>

<p>Dans le cas d'une chaîne de caractères, l'opérateur <strong>+</strong> ne sert pas à additionner, mais à coller un texte à la suite d'un autre. 
    On parle de concaténation pour cette opération. Par exemple </p>

<pre><code class="language-python">print("Les oranges sont " + "des fruits")</code></pre>

<p>affichera <em>Les oranges sont des fruits</em> sans procéder à aucun calcul.</p>


    <div class="exerciceApplication">
<p><strong>A toi de jouer : </strong></p>
<p>Pour bien comprendre la différence entre l'addition et la concaténation, exécute le code suivant :</p>
<pre><code class="language-python">a = 12
b = 15
print(a + b) # addition de nombres, affiche 27

a = "12"
b = "15"
print(a + b) # concaténation de caractères, affiche "1215"</code></pre>


<!-- SANDBOX 1 -->
{% include '../../../sandbox.html' with nmr='1' %}
</div>
<script>
    initializeSandbox(commentInitial, 1);
</script>


<!-- QESTIONNAIRE -->
<div class="quizUnique">
<h4 class="mt-0">As-tu bien compris ?</h4>

{% include '../../../questionnaireUnique.html' with nmr='3' %}
</div>
<script>
var questionsData3 = 
    {
        question: "Si on a défini nom = 'Henri' et age = 17, qu'affiche l'exécution du code print(nom + age) ...",
        options:["Henri17", "Henri 17", "un message d'erreur"],
        correctIndex: 2,
        commentaire: "On ne peut pas concaténer deux variables de types différents. Il est donc important de bien connaître les types des variables utilisées."
    };
questionnaireUnique(3, questionsData3);
</script>


<!-- TRANSFORMER DES CHAINES -->

<p class="my-5 invisible" id="transformer">ancre</p>

<h3>Des méthodes pour transformer les chaînes</h3>

<p>On a parfois besoin de faire des opérations sur les chaînes de caractères, par exemple pour gérer les mots 
    de passe où il faut s'assurer qu'ils comprennent une majuscule, un caractère spécial et au moins 8 caractères, etc...</p>

<table>
    <tr><th>méthode</th><th>signification</th></tr>
    <tr><td><pre><code class="language-python">len(maChaine)</code></pre></td><td>renvoie le nombre de caractères de <strong>maChaine</strong></td></tr>
    <tr><td><pre><code class="language-python">maChaine.find("a")</code></pre></td><td>renvoie la 1ère position de la lettre <em>a</em> dans <strong>maChaine</strong>, renvoie -1 si <strong>maChaine</strong> ne contient pas la lettre <em>a</em></td></tr>
    <tr><td><pre><code class="language-python">maChaine.upper()</code></pre></td><td>renvoie une chaîne correspondant à <strong>maChaine</strong> en majuscules, <em>attention</em> la variable <strong>maChaine</strong> n'est pas modifiée</td></tr>
    <tr><td><pre><code class="language-python">maChaine.capitalize()</code></pre></td><td>renvoie une chaîne correspondant à <strong>maChaine</strong> en minuscules avec la 1ère lettre en majuscule, <em>attention</em> la variable <strong>maChaine</strong> n'est pas modifiée</td></tr>
    <tr><td><pre><code class="language-python">maChaine.count("a")</code></pre></td><td>renvoie le nombre de fois que la lettre <em>a</em> apparaît dans <strong>maChaine</strong></td></tr>
    <tr><td><pre><code class="language-python">maChaine.replace("a", "b")</code></pre></td><td>renvoie une chaîne correspondant à <strong>maChaine</strong> dans laquelle les <em>a</em> ont été remplacés par des <em>b</em>, <em>attention</em> la variable <strong>maChaine</strong> n'est pas modifiée</td></tr>
    <tr><td><pre><code class="language-python">maChaine.isnumeric()</code></pre></td><td>renvoie <strong>True</strong> si <strong>maChaine</strong> peut être transformée en nombre entier, <strong>False</strong> sinon</td></tr>
</table>

<div class="exerciceApplication">
    <p><strong>A toi de jouer :</strong> utilise les méthodes ci-dessus pour afficher à partir de la variable <strong>maChaine = "la neige se transforme en névé l'été"</strong>
    <ul>
        <li>lo neige se tronsforme en névé l'été</li>
        <li>LA NEIGE SE TRANSFORME EN NEVE L'ETE</li>
        <li>La neige se transforme en névé l'été</li>
        <li>le nombre de lettres e dans maChaine</li>
        <li>la 1ère position de la lettre s dans maChaine</li>
        <li>la longueur de maChaine</li>
    </ul>
    </p>
    <div>
        <p><button class='bouton' type="submit" onclick="affichageConditionnel(this,'solution5');"> Voir la solution </button></p>
    </div>

    <div id="solution5" style="display:none;">
        <p>Solution :</p>
        <pre><code class="language-python">maChaine = "la neige se transforme en névé l'été"
print(maChaine.replace('a', 'o'))
print(maChaine.upper())
print(maChaine.capitalize())
print(maChaine.count('e'))
print(maChaine.find('s'))
print(len(maChaine))</code></pre>
    </div>



<!-- SANDBOX 2 -->
{% include '../../../sandbox.html' with nmr='2' %}
</div>
<script>
    initializeSandbox("bonjour", 2);
</script>

<p>Les méthodes ci-dessus ne modifient pas les chaînes de caractères, mais construisent une nouvelle 
    chaîne à partir de la chaîne de départ. Ainsi, </p>
    <pre><code class='language-python'>chaine = 'hello world'
nouvelleChaine = chaine.capitalize()
    
print(chaine) # renvoie 'hello world'
print(nouvelleChaine)  # renvoie 'Hello world'</code></pre>

<p>Il est toutefois facile de modifier une chaîne de caractères en s'assurant de stocker le résultat 
    obtenu dans la variable de départ, comme dans l'exemple ci-dessous :</p>

    <pre><code class='language-python'>chaine = 'hello world'
chaine = chaine.capitalize()
        
print(chaine) # renvoie 'Hello world'</code></pre>

<p>Pour quelle raison voit-on apparaître la valeur -1 dans l'instruction maChaine.find('x') alors que 0 
    représente en général la valeur False en programmation ? Si cette instruction renvoyait la valeur 0 lorsque 'x' 
    ne se trouve pas dans maChaine, on ne saurait pas si la valeur renvoyée signifie False ou si la lettre 'x' se 
    situe à l'indice 0 de maChaine. Le choix de l'indice négatif -1 évite toute ambiguité.</p>


<!-- EXTRAIRE UNE CHAINE -->

<p class="invisible" id="extraire">ancre</p>

<h3>Extraire une sous-chaîne à partir d'une chaîne</h3>

<p>Il est parfois utile d'extraire une chaîne de caractères à partir d'une chaîne de caractères. L'instruction
    <strong>maChaine[3:6]</strong> extrait les caractères de <strong>maChaine</strong> dont les
    indices sont compris entre 3 et 5 inclus. <em>Attention</em>, de la même façon que pour la boucle
    <strong>for</strong>, ou pour les listes (que nous verrons plus tard), l'indice du dernier
    terme n'est pas pris en compte.</p>

<div class="exerciceApplication">
    <p><strong>A toi de jouer : </strong> exécute le code suivant pour bien comprendre ce qui
        est extrait de <strong>maChaine</strong></p>

    <pre><code class="language-python">maChaine = "la neige fond en été"
print(maChaine)
print(maChaine[3:6])  # affiche de l'indice 3 à l'indice 5, "nei"
print(maChaine[3:])  # affiche de l'indice 3 à la fin, "neige fond en été"
print(maChaine[:4])  # affiche du début à l'indice 3, "la n"
print(maChaine[-1])  # affiche "é"
print(maChaine[-5])  # affiche "n"</code></pre>


<!-- SANDBOX 3 -->
{% include '../../../sandbox.html' with nmr='3' %}
</div>
<script>
    initializeSandbox("hello", 3);
</script>

<p>On est maintenant capable d'extraire une partie d'une chaîne, de la concaténer avec une autre partie
    de cette chaîne. On devrait donc pouvoir inverser les lettres d'un mot à l'aide d'un programme.</p>


<!-- ENTRAINEMENT -->
<h3>Entraînement</h3>



<!-- QUIZ -->

<div class="row py-5 gx-md-5 gy-2" style="border:2px solid var(--couleur_titre);border-radius:10px;margin:0%;margin-top:5%;padding-left:2%;">
    <div class="col-12 col-md-6">
        <img class="img_ombre" src="{% static 'home/images/general/index14.jpg' %}">  
    </div>
    <div class="col-12 col-md-6 my-auto" style="text-align:center;">
        <a class="blink_me annonce_quiz" href="{% url 'afficherModeleQuiz' niveau='python' chapitre='debuter' id=2 %}">Essaie le Quiz maintenant !</a>
    </div>
</div>

{% endblock cours %}